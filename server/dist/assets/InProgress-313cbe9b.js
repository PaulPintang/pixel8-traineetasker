import{h as R,i as j,k as B,l as P,m as r,C as _,n as i,Q as z,T as s,U as S,G as t,K as w}from"./index-ef5c4769.js";const K=({toggle:T,setViewId:A})=>{var o;const{user:l}=R(e=>e.auth),{data:c}=j(),a=c==null?void 0:c.filter(e=>e.status==="inprogress"),{data:d}=B(void 0,{skip:(l==null?void 0:l.role)!=="trainee"}),n=(o=d==null?void 0:d.timesheet)==null?void 0:o.find(e=>e.status==="recording"),b={status:n==null?void 0:n.status,morning:n==null?void 0:n.morning,afternoon:n==null?void 0:n.afternoon},{spent:D,totalSpentString:G,afternoonSpentString:C,morningSpentString:Q}=P(b);return r("div",{className:"space-y-3",children:[a==null?void 0:a.map(e=>{var m,h,g,p,f,x,u,v,N,y;return r(_,{className:"cursor-pointer hover:shadow-xl rounded-md shadow-md transition-all",onClick:()=>{T(),A(e._id)},children:[i("div",{className:"bg-violet-300 w-8 h-1"}),r(z,{pt:15,className:"space-y-1",children:[i(s,{fw:"bold",c:"dark",fz:"sm",children:e.taskname}),i(S,{variant:"filled",color:"violet",size:"sm",children:"in-progress"}),((m=e.timeline)==null?void 0:m.revisions.length)!==0&&r(t,{className:"text-gray-500",spacing:10,children:[i(s,{size:"xs",children:"Revisions"}),r(S,{size:"sm",color:"red",variant:"light",className:"lowercase",children:["x",(h=e.timeline)==null?void 0:h.revisions.length]})]}),r(z,{children:[r(t,{className:"text-gray-500",fz:"xs",spacing:8,children:[i(s,{children:"Ticket:"}),i(s,{children:e.ticketno})]}),r(t,{className:"text-gray-500",fz:"xs",spacing:8,children:[i(s,{children:"Added:"}),i(s,{children:w(e.createdAt).date+" at "+w(e.createdAt).time})]}),r(t,{className:"text-gray-500",fz:"xs",spacing:8,children:[i(s,{children:"Started:"}),i(s,{children:(g=e.timeline)==null?void 0:g.startedAt})]}),(n==null?void 0:n.status)==="recording"&&r(t,{className:"text-gray-500",fz:"xs",spacing:8,children:[((p=e.timeline)==null?void 0:p.revisions.length)!==0?i(s,{children:"Revision time: "}):i(s,{children:"On timesheet: "}),r(s,{fw:"bold",className:"animate-recording",children:[((f=e.timeline)==null?void 0:f.revisions.length)!==0?i("span",{children:"+ "}):"",((x=n.morning)==null?void 0:x.start)!==""&&((u=n.morning)==null?void 0:u.end)!==""&&n.status==="recording"?i("span",{children:C}):((v=n.afternoon)==null?void 0:v.start)!==""&&((N=n.afternoon)==null?void 0:N.end)!==""&&n.status==="recording"?i("span",{children:Q}):G]})]}),((y=e.timeline)==null?void 0:y.revisions.length)!==0?r(t,{className:"text-gray-500",fz:"xs",spacing:8,children:[i(s,{children:"Recorded spent: "}),i(s,{fw:"bold",children:e.spent})]}):""]})]})]},e._id)}),(a==null?void 0:a.length)===0&&i(s,{c:"dimmed",fs:"italic",fz:"xs",className:"tracking-normal",children:"there are no in progress tasks!"})]})};export{K as default};
