import{r as b,u as ne,a as Ne,R as _,I as Pe,b as P,c as Se,g as ze,d as H,e as Oe,f as ke,h as ie,i as ce,j as de,k as $e,l as Ie,m as n,n as a,T as i,B as k,F as S,C as he,E as Ee,o as $,G as I,p as pe,q as W,V as De,s as Te,t as me,M as je,A as ue,v as Ae,S as Ge,w as J,_ as Ve,x as Re,y as O,z as Me,D as Fe,H as Le}from"./index-ef5c4769.js";import{l as Be,H as qe,I as Qe,P as Ye}from"./lodash-2ab651e2.js";import{I as He,G as We,S as Ue}from"./GettingData-b88e00c9.js";import{I as Xe}from"./InlineInput-165b5cf2.js";const ge=b.createContext(null),Je=ge.Provider,Ke=()=>b.useContext(ge);var Ze=Object.defineProperty,R=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,K=(e,t,r)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Z=(e,t)=>{for(var r in t||(t={}))fe.call(t,r)&&K(e,r,t[r]);if(R)for(var r of R(t))ve.call(t,r)&&K(e,r,t[r]);return e},et=(e,t)=>{var r={};for(var o in e)fe.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&R)for(var o of R(e))t.indexOf(o)<0&&ve.call(e,o)&&(r[o]=e[o]);return r};const tt={size:"sm"},ye=b.forwardRef((e,t)=>{const r=ne("CheckboxGroup",tt,e),{children:o,value:l,defaultValue:p,onChange:m,size:h,wrapperProps:v}=r,u=et(r,["children","value","defaultValue","onChange","size","wrapperProps"]),[c,g]=Ne({value:l,defaultValue:p,finalValue:[],onChange:m}),f=d=>{const x=d.currentTarget.value;g(c.includes(x)?c.filter(E=>E!==x):[...c,x])};return _.createElement(Je,{value:{value:c,onChange:f,size:h}},_.createElement(Pe.Wrapper,Z(Z({labelElement:"div",size:h,__staticSelector:"CheckboxGroup",ref:t},v),u),o))});ye.displayName="@mantine/core/CheckboxGroup";var at=Object.defineProperty,M=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))be.call(t,r)&&ee(e,r,t[r]);if(M)for(var r of M(t))xe.call(t,r)&&ee(e,r,t[r]);return e},we=(e,t)=>{var r={};for(var o in e)be.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&M)for(var o of M(e))t.indexOf(o)<0&&xe.call(e,o)&&(r[o]=e[o]);return r};function rt(e){const t=e,{width:r,height:o,style:l}=t,p=we(t,["width","height","style"]);return _.createElement("svg",F({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:F({width:r,height:o},l)},p),_.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function ot(e){var t=e,{indeterminate:r}=t,o=we(t,["indeterminate"]);return r?_.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},o),_.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):_.createElement(rt,F({},o))}var lt=Object.defineProperty,st=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,re=(e,t)=>{for(var r in t||(t={}))it.call(t,r)&&ae(e,r,t[r]);if(te)for(var r of te(t))ct.call(t,r)&&ae(e,r,t[r]);return e},oe=(e,t)=>st(e,nt(t));const dt={xs:P(16),sm:P(20),md:P(24),lg:P(30),xl:P(36)};var ht=Se((e,{radius:t,color:r,transitionDuration:o,labelPosition:l,error:p,indeterminate:m},{size:h})=>{const v=ze({size:h,sizes:dt}),u=e.fn.variant({variant:"filled",color:r});return{icon:oe(re({},e.fn.cover()),{ref:H("icon"),color:m?"inherit":e.white,transform:m?"none":`translateY(${P(5)}) scale(0.5)`,opacity:m?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${o}ms`,pointerEvents:"none",width:"60%",position:"absolute",zIndex:1,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}}),inner:{position:"relative",width:v,height:v,order:l==="left"?2:1},input:oe(re({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`${P(1)} solid ${p?e.fn.variant({variant:"filled",color:"red"}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:v,height:v,borderRadius:e.fn.radius(t),padding:0,display:"block",margin:0,transition:`border-color ${o}ms ease, background-color ${o}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:u.background,borderColor:u.background,[`& + .${H("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",pointerEvents:"none",[`& + .${H("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const pt=ht;var mt=Object.defineProperty,L=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,le=(e,t,r)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))_e.call(t,r)&&le(e,r,t[r]);if(L)for(var r of L(t))Ce.call(t,r)&&le(e,r,t[r]);return e},ut=(e,t)=>{var r={};for(var o in e)_e.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&L)for(var o of L(e))t.indexOf(o)<0&&Ce.call(e,o)&&(r[o]=e[o]);return r};const gt={size:"sm",transitionDuration:100,icon:ot,labelPosition:"right"},U=b.forwardRef((e,t)=>{const r=ne("Checkbox",gt,e),{className:o,style:l,sx:p,checked:m,disabled:h,color:v,label:u,indeterminate:c,id:g,size:f,radius:d,wrapperProps:x,children:E,classNames:N,styles:z,transitionDuration:w,icon:B,unstyled:q,labelPosition:G,description:D,error:y,variant:T}=r,Q=ut(r,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error","variant"]),C=Ke(),j=Oe(g),{systemStyles:s,rest:A}=ke(Q),{classes:Y}=pt({radius:d,color:v,transitionDuration:w,labelPosition:G,error:!!y,indeterminate:c},{name:"Checkbox",classNames:N,styles:z,unstyled:q,variant:T,size:(C==null?void 0:C.size)||f}),X=C?{checked:C.value.includes(A.value),onChange:C.onChange}:{};return _.createElement(Xe,V(V({className:o,sx:p,style:l,id:j,size:(C==null?void 0:C.size)||f,labelPosition:G,label:u,description:D,error:y,disabled:h,__staticSelector:"Checkbox",classNames:N,styles:z,unstyled:q,"data-checked":X.checked||void 0,variant:T},s),x),_.createElement("div",{className:Y.inner},_.createElement("input",V(V({id:j,ref:t,type:"checkbox",className:Y.input,checked:m,disabled:h},A),X)),_.createElement(B,{indeterminate:c,className:Y.icon})))});U.displayName="@mantine/core/Checkbox";U.Group=ye;const ft=()=>{var C,j;const{user:e}=ie(s=>s.auth),{data:t,refetch:r,isLoading:o,isFetching:l}=ce(),[p,{toggle:m}]=de(),[h,v]=b.useState(1),[u,c]=b.useState(""),[g,f]=b.useState(null),[d,x]=b.useState(""),[E,N]=b.useState(!1),{data:z}=$e(),w=(C=z==null?void 0:z.timesheet)==null?void 0:C.find(s=>s.status==="recording"),B={status:w==null?void 0:w.status,morning:w==null?void 0:w.morning,afternoon:w==null?void 0:w.afternoon},{spent:q,totalSpentString:G}=Ie(B),D=t==null?void 0:t.filter(s=>{var A;return(A=s.taskname)==null?void 0:A.toLowerCase().includes(u.toLowerCase())}),y=D==null?void 0:D.filter(s=>d?s.status===d:(e==null?void 0:e.role)==="trainee"?(e==null?void 0:e.name)===s.assign:s),T=Be.chunk(y,5);b.useEffect(()=>{d&&r().then(()=>N(!1))},[d]);const Q=(j=T[h-1])==null?void 0:j.map(s=>n("tr",{children:[a("td",{className:" md:table-cell lg:table-cell pl-3",children:a(i,{children:a(qe,{highlightColor:"cyan",highlight:u,children:s.taskname})})}),a("td",{className:"hidden md:table-cell lg:table-cell",children:a(i,{children:s.ticketno})}),a("td",{className:"px-5 py-2  md:table-cell lg:table-cell ",children:a(i,{children:s.spent!==""?s.spent:a("span",{children:G})})}),a("td",{className:" py-2 hidden md:table-cell lg:table-cell",children:n("div",{className:"flex bg-gray-100  rounded items-center max-w-max px-2 py-1 gap-2",children:[a("div",{className:`w-2 h-2 ${s.status==="new"?"bg-indigo-300":s.status==="inprogress"?"bg-violet-400":s.status==="completed"?"bg-green-300":s.status==="forqa"?"bg-yellow-300":"bg-red-300"}`}),a(i,{fw:"bold",className:`text-[10px] ${s.status==="new"?"text-indigo-300":s.status==="inprogress"?"text-violet-400":s.status==="completed"?"text-green-300":s.status==="forqa"?"text-yellow-300":"text-red-300"}`,children:s.status})]})}),a("td",{className:"dark:text-gray-400   md:table-cell lg:table-cell",children:a(k,{onClick:()=>{m(),f(s._id)},leftIcon:a(He,{size:16}),variant:"white",color:"cyan",size:"xs",children:"View"})})]},s._id));return n(S,{children:[n(he,{className:"bg-opacity-60 rounded-md shadow-md h-[calc(100vh-100px)] lg:h-[calc(100vh-365px)] md:h-[calc(100vh-365px)]",children:[a("div",{className:"h-[95%] lg:h-[90%] md:h-[90%]",children:n("table",{className:"border-collapse border-none w-full",children:[a("thead",{children:n("tr",{children:[a("th",{scope:"col",className:"md:px-3 lg:px-3 pl-3 py-3 text-left text-[9px] font-[600] text-gray-400   tracking-wider  bg-gray-100 shadow-sm rounded-tl-md",children:a(i,{children:"Task Name"})}),a("th",{scope:"col",className:"hidden  md:table-cell lg:table-cell rounded-tr-md md:rounded-none lg:rounded-none py-3 md:pr-3 lg:pr-3 text-left text-[9px] font-[600] text-gray-400   tracking-wider  bg-gray-100 shadow-sm",children:a(i,{children:"Ticket No."})}),a("th",{scope:"col",className:" md:table-cell lg:table-cell px-5 py-3 text-left text-[9px] font-[600] text-gray-400   tracking-wider bg-gray-100 shadow-sm",children:a(i,{children:"Total spent"})}),a("th",{scope:"col",className:"hidden  md:table-cell lg:table-cell py-3 text-left text-[9px] font-[600] text-gray-400   tracking-wider bg-gray-100 shadow-sm",children:a(i,{children:"Status"})}),a("th",{scope:"col",className:"  md:table-cell lg:table-cell py-3 text-left text-[9px] font-[600] text-gray-400   tracking-wider bg-gray-100 shadow-sm",children:a(i,{children:"Action"})})]})}),E&&d?a(We,{}):(y==null?void 0:y.length)===0?a(S,{children:a(Ee,{text:u?"Task not found":`There are no ${d} tasks`})}):a("tbody",{className:"text-xs text-gray-600",children:Q})]})}),n($,{justify:"space-between",className:"overflow-hidden",children:[n(I,{align:"center",spacing:10,children:[a(pe,{className:"hidden lg:flex md:flex",rightSection:u?a(W,{onClick:()=>c(""),size:14,className:"hover:cursor-pointer text-gray-500 hover:text-gray-800 transition-all"}):a(Qe,{size:14,className:"text-gray-500"}),size:"xs",placeholder:"Search",value:u,onChange:s=>c(s.currentTarget.value)}),a(Ue,{size:"xs",value:d,onChange:s=>{N(!0),x(s)},w:150,placeholder:"Filter",data:[{value:"",label:"All tasks"},{value:"new",label:"New"},{value:"inprogress",label:"In-Progress"},{value:"forqa",label:"For-QA"},{value:"failed",label:"Failed"},{value:"completed",label:"Completed"}]})]}),n(I,{children:[n(I,{spacing:3,className:"hidden",children:[a(i,{fz:"xs",className:"uppercase font-semibold text-gray-700",children:"Total:"}),n(i,{fz:"xs",children:[y==null?void 0:y.length," task",(y==null?void 0:y.length)>=2&&"s"]})]}),a(Ye,{total:T.length,value:h,onChange:v,size:"xs",color:"cyan"})]})]})]}),a(De,{tasks:t,viewId:g,view:p,toggleView:m})]})},se="/assets/emptytodo-69eb0fba.png",vt=({add:e,toggle:t,currentTask:r})=>{const o=Te("(max-width: 50em)"),[l,p]=b.useState({isDone:!1,todo:""}),[m,h]=b.useState([]),[v,{isLoading:u}]=me(),c=()=>{h([...m,l]),p({...l,todo:""})},g=async()=>{const f=[...r.todos,...m];await v({_id:r._id,todos:f}),t(),p({...l,todo:""}),h([]),Ae("New todo added to your in-progress task","success")};return n(je,{size:"sm",opened:e,fullScreen:o,onClose:()=>{t(),p({...l,todo:""}),h([])},title:a(i,{c:"dark",fz:"sm",children:"Add todo's to your current task!"}),children:[n("div",{className:"space-y-1",children:[n(I,{spacing:10,pb:3,children:[a(i,{fz:12,className:"text-gray-500 font-semibold",children:"Current Task:"}),a(i,{fz:12,c:"dimmed",children:r==null?void 0:r.taskname})]}),n($,{gap:8,children:[a(pe,{autoComplete:"off",placeholder:"add todo",name:"taskname",value:l.todo,onChange:f=>p({...l,todo:f.target.value}),className:"w-full"}),a(k,{onClick:c,size:"sm",disabled:l.todo==="",children:"Add"})]})]}),a("div",{className:"space-y-2 py-3",children:m.map((f,d)=>a("div",{children:n("div",{className:"bg-slate-50 opacity-70 px-3 py-2 rounded-md relative",children:[a(i,{c:"dark",fz:"sm",className:"w-[80%]",py:4,children:f.todo}),a("div",{className:"absolute top-2 right-3",children:a(ue,{color:"red",variant:"light",radius:"xl",onClick:()=>h(x=>x.filter((E,N)=>N!==d)),children:a(W,{size:16})})})]})},d))}),m.length!==0&&n($,{children:[a(k,{variant:"white",color:"gray",mt:"md",onClick:()=>{t(),p({...l,todo:""}),h([])},fullWidth:!0,children:"Cancel"}),a(k,{mt:"md",onClick:g,fullWidth:!0,color:"cyan",loading:u,children:"Save"})]})]})},yt=()=>{var h,v,u;const{data:e}=ce(),[t]=me(),[r,{toggle:o}]=de(),l=e==null?void 0:e.find(c=>c.status==="inprogress"),p=async c=>{var g;await t({_id:l==null?void 0:l._id,todos:(g=l==null?void 0:l.todos)==null?void 0:g.filter((f,d)=>d!==c)})},m=async c=>{var f;const g=(f=l==null?void 0:l.todos)==null?void 0:f.map((d,x)=>x===c?{...d,isDone:!d.isDone}:d);await t({_id:l==null?void 0:l._id,todos:g})};return n(S,{children:[a(he,{className:"rounded-md shadow-md h-[calc(100vh-365px)]",children:l?a(S,{children:((h=l==null?void 0:l.todos)==null?void 0:h.length)??!1?n(S,{children:[n(I,{spacing:10,pb:5,children:[a(i,{fz:"sm",className:"text-gray-500 font-semibold",children:"Current Task:"}),a(i,{fz:"sm",c:"dimmed",children:l==null?void 0:l.taskname})]}),n($,{align:"center",justify:"space-between",pb:3,children:[n(i,{fz:"xs",className:"text-gray-500 font-semibold",children:["You've got ",(v=l==null?void 0:l.todos)==null?void 0:v.length," todos for this task"]}),a(k,{size:"xs",variant:"white",onClick:o,children:a(i,{children:"+ Add more"})})]}),a(Ge.Autosize,{mah:175,scrollbarSize:8,children:a("div",{className:"space-y-3",children:(u=l==null?void 0:l.todos)==null?void 0:u.slice().reverse().map((c,g)=>n("div",{className:"bg-slate-50 opacity-70 px-3 py-2 rounded-md relative",children:[a(i,{c:"dark",fz:"xs",className:"w-[80%]",py:4,children:a("span",{className:c.isDone?"line-through italic":"",children:c.todo})}),a("div",{className:"absolute top-2 right-3",children:n(I,{spacing:6,children:[a(U,{checked:c.isDone,size:"xs",color:"cyan",onChange:()=>m(g)}),a(ue,{color:"red",variant:"light",radius:"xl",onClick:()=>p(g),children:a(W,{size:15})})]})})]},g))})})]}):n($,{direction:"column",align:"center",gap:10,children:[a(J,{src:se,width:130}),a(i,{fw:"bold",c:"dark",children:"Don't have any new todo?"}),a(k,{size:"sm",color:"cyan",onClick:o,children:"Add todos"})]})}):n($,{direction:"column",align:"center",gap:10,children:[a(J,{src:se,width:130}),n("div",{className:"text-center",children:[a(i,{fw:"bold",c:"dark",children:"You don't have inprogress task"}),a(i,{fz:"xs",c:"dimmed",children:"You can only add todos if you have inprogress task"})]})]})}),a(vt,{add:r,toggle:o,currentTask:l})]})},bt=b.lazy(()=>Ve(()=>import("./MembersTableCard-fe557f02.js"),["assets/MembersTableCard-fe557f02.js","assets/index-ef5c4769.js","assets/index-e2437bb2.css","assets/lodash-2ab651e2.js","assets/GettingData-b88e00c9.js","assets/IconDots-fd98005d.js","assets/IconUser-6d097cff.js","assets/InlineInput-165b5cf2.js"])),xt=()=>{const{user:e}=ie(t=>t.auth);return Re("Dashboard"),a(S,{children:n(O,{pb:5,children:[n(O.Col,{className:"space-y-1",md:8,lg:8,sm:"auto",children:[a(Me,{}),a(Fe,{})]}),a(O.Col,{lg:4,md:4,sm:"auto",children:a(Le,{})}),(e==null?void 0:e.role)==="trainee"?n(S,{children:[a(O.Col,{md:8,lg:8,sm:"auto",children:a(ft,{})}),a(O.Col,{className:"bg-bl ue-300",md:4,lg:4,sm:"auto",children:a(yt,{})})]}):a(O.Col,{span:"auto",children:a(bt,{})})]})})},Pt=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));export{U as C,Pt as D};
